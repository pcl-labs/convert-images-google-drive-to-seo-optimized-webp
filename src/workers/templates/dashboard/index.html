{% extends "base.html" %}
{% set page_title = 'Dashboard' %}
{% from 'components/layout/page.html' import page_container %}
{% from 'components/dashboard/composer.html' import project_composer %}
{% from 'components/dashboard/project_list.html' import project_row %}
{% block content %}
{% call page_container('space-y-8') %}
  {{ project_composer(csrf_token, content_schema_choices, youtube_connected) }}

  <section class="rounded-[32px] bg-surface px-6 py-5 shadow" x-data="{ currentTab: '{{ project_tab }}' }">
    <div class="flex items-center gap-8 border-b border-border/60 px-2">
      <button type="button" class="py-4 text-sm font-semibold uppercase tracking-wide transition-colors"
        :class="currentTab === 'projects' ? 'text-content border-b-2 border-primary' : 'text-contentMuted hover:text-content'"
        @click="currentTab = 'projects'">
        Projects
      </button>
      <button type="button" class="py-4 text-sm font-semibold uppercase tracking-wide transition-colors"
        :class="currentTab === 'archive' ? 'text-content border-b-2 border-primary' : 'text-contentMuted hover:text-content'"
        @click="currentTab = 'archive'">
        Archive
      </button>
    </div>
    <div class="py-4">
      <div x-show="currentTab === 'projects'">
        {% if projects_active %}
          <div class="space-y-2">
            {% for project in projects_active %}
              {{ project_row(project) }}
            {% endfor %}
          </div>
        {% else %}
          <div class="rounded-2xl border border-dashed border-border p-8 text-center text-sm text-contentMuted">
            No projects yet. Create one from the composer above.
          </div>
        {% endif %}
      </div>
      <div x-cloak x-show="currentTab === 'archive'">
        {% if projects_archive %}
          <div class="space-y-2">
            {% for project in projects_archive %}
              {{ project_row(project) }}
            {% endfor %}
          </div>
        {% else %}
          <div class="rounded-2xl border border-dashed border-border p-8 text-center text-sm text-contentMuted">
            Archive is empty. Completed projects will land here automatically.
          </div>
        {% endif %}
      </div>
    </div>
  </section>
{% endcall %}
{% endblock %}

{% block scripts %}
  {% include 'components/scripts/project_composer.html' %}
{% endblock %}
