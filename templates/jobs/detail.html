{% extends "base.html" %}
{% block content %}
  <section>
    <hgroup>
      <h1>Job {{ job.job_id }}</h1>
      <p>Status: <strong>{{ job.status }}</strong></p>
    </hgroup>
    {% if job.error %}
      <article class="contrast">Error: {{ job.error }}</article>
    {% endif %}
    <p>Drive Folder: {{ job.drive_folder }}</p>
    <div id="job-status"
         data-status="{{ job.status }}"
         hx-get="/jobs/{{ job.job_id }}"
         hx-trigger="every 2s[document.querySelector('#job-status') && document.querySelector('#job-status').dataset.status === 'processing']"
         hx-swap="innerHTML">
      <p>Status: <strong>{{ job.status }}</strong></p>
      {% if job.error %}
        <article class="contrast">Error: {{ job.error }}</article>
      {% endif %}
    </div>
    <p><a href="/dashboard">Back to Dashboard</a></p>
  </section>
{% endblock %}
