{% extends "base.html" %}
{% from 'components/layout/page.html' import page_container, page_header %}
{% block content %}
  {% call page_container() %}
    {{ page_header('Dashboard', 'Enter a Document ID to kick off optimization. Use the Documents API to register Drive folders.') }}

    {% from 'components/elements/card.html' import card %}
    {% call card(title='Create Job', actions='<a href="/auth/google/start?integration=drive&redirect=/dashboard" class="text-sm text-primary hover:text-primary/80">Link Google</a>') %}
      <form class="space-y-3" hx-post="/dashboard/jobs" hx-target="#jobs-list" hx-swap="outerHTML">
        <input type="hidden" name="csrf_token" value="{{ csrf_token }}" />
        {% from 'components/elements/input.html' import input %}
        {{ input('document_id', label='Document ID', placeholder='doc_123...', attrs='required') }}
        <div class="flex flex-col gap-2 sm:flex-row">
          {% from 'components/elements/button.html' import button %}
          {{ button('Create Job', variant='primary', attrs='type="submit"', extra_classes='w-full sm:w-auto') }}
        </div>
      </form>
    {% endcall %}

    {% call card(title='Recent Jobs') %}
      {% include "jobs/partials/jobs_list.html" %}
    {% endcall %}
  {% endcall %}
{% endblock %}
