{% extends "base.html" %}
{% block page_title %}{{ service.name }}{% endblock %}
{% block content %}
<div class="p-4 md:p-6 space-y-6">
  <a href="/dashboard/integrations" class="inline-flex items-center text-slate-300 hover:text-white text-sm">
    <svg class="h-4 w-4 mr-2" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
    Back
  </a>

  <div class="rounded-md border border-slate-800 bg-slate-900/60 px-4 py-4">
    <div class="flex items-start justify-between gap-4">
      <div class="flex items-start gap-3 min-w-0">
        <div class="h-11 w-11 rounded-md bg-slate-900 border border-slate-800 shrink-0 flex items-center justify-center">
          {% if service.key == 'drive' %}
            <svg viewBox="0 0 256 256" class="h-6 w-6" aria-hidden="true">
              <path fill="#0F9D58" d="M44 192l36-62h72l-36 62z"/>
              <path fill="#4285F4" d="M80 130L44 192 0 118l36-62z"/>
              <path fill="#F4B400" d="M116 68h72l68 118h-72z"/>
            </svg>
          {% elif service.key == 'gmail' %}
            <svg viewBox="0 0 256 256" class="h-6 w-6" aria-hidden="true">
              <path fill="#EA4335" d="M32 200V80l96 64 96-64v120h-40V120l-56 38-56-38v80z"/>
              <path fill="#34A853" d="M32 80l24-16 72 48-24 16z"/>
              <path fill="#FBBC05" d="M224 80l-24-16-72 48 24 16z"/>
              <path fill="#4285F4" d="M32 200h40v-80L32 80zM184 120v80h40V80z"/>
            </svg>
          {% elif service.key == 'youtube' %}
            <svg viewBox="0 0 256 256" class="h-6 w-6" aria-hidden="true">
              <rect x="16" y="64" width="224" height="128" rx="24" fill="#FF0000"/>
              <path d="M112 96l48 32-48 32z" fill="#fff"/>
            </svg>
          {% else %}
            <svg viewBox="0 0 24 24" class="h-6 w-6 text-slate-300" fill="currentColor" aria-hidden="true"><circle cx="12" cy="12" r="10"/></svg>
          {% endif %}
        </div>
        <div class="min-w-0">
          <div class="text-white font-semibold truncate">{{ service.name }}</div>
          <div class="text-sm text-slate-400 leading-relaxed">{{ service.description }}</div>
        </div>
      </div>
      <div class="shrink-0">
        {% from 'components/elements/button.html' import button %}
        {% if integration and integration.connected %}
          {% if service.key == 'drive' %}
            <div x-data="{ submit(){ $refs.form && $refs.form.submit() } }" @confirm-drive-disconnect.window="submit()">
              <form x-ref="form" method="post" action="/dashboard/integrations/drive/disconnect">
                <input type="hidden" name="csrf_token" value="{{ csrf_token }}" />
                {{ button('Disconnect', variant='destructive', attrs='type="button" @click="$dispatch(\'open-drive-disconnect\')"') }}
              </form>
            </div>
          {% else %}
            {{ button('Connected', variant='secondary', attrs='disabled', extra_classes='opacity-60 cursor-not-allowed') }}
          {% endif %}
        {% else %}
          {% if service.key == 'drive' %}
            <a href="/auth/google/start" class="inline-flex items-center justify-center rounded-md px-3 py-2 text-sm font-medium bg-sky-600 hover:bg-sky-500 text-white">Connect</a>
          {% else %}
            {{ button('In roadmap', variant='secondary', attrs='disabled', extra_classes='opacity-60 cursor-not-allowed') }}
          {% endif %}
        {% endif %}
      </div>
    </div>
  </div>

  <div>
    <h2 class="text-sm font-semibold text-white mb-2">Information</h2>
    <div class="rounded-md border border-slate-800 bg-slate-900/60 overflow-hidden">
      {% if integration and integration.connected %}
        <div class="flex items-center justify-between px-4 py-4 border-b border-slate-800">
          <div class="text-slate-400">Connected on</div>
          <div class="text-slate-200">{{ service.created_at or '—' }}</div>
        </div>
      {% else %}
        <div class="flex items-center justify-between px-4 py-4 border-b border-slate-800">
          <div class="text-slate-400">Created at</div>
          <div class="text-slate-200">{{ service.created_at or '—' }}</div>
        </div>
      {% endif %}
      <div class="flex items-center justify-between px-4 py-4 border-b border-slate-800">
        <div class="text-slate-400">Category</div>
        <div class="text-slate-200">{{ service.category }}</div>
      </div>
      <div class="flex items-center justify-between px-4 py-4 border-b border-slate-800">
        <div class="text-slate-400">Developer</div>
        <div class="text-slate-200">{{ service.developer }}</div>
      </div>
      <a class="flex items-center justify-between px-4 py-4 border-b border-slate-800 hover:bg-slate-900/70" href="{{ service.website }}" target="_blank" rel="noopener">
        <div class="text-slate-400">Website</div>
        <svg class="h-4 w-4 text-sky-400" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 3h7v7M10 14L21 3M21 14v7h-7"/></svg>
      </a>
      <a class="flex items-center justify-between px-4 py-4 hover:bg-slate-900/70" href="{{ service.privacy }}" target="_blank" rel="noopener">
        <div class="text-slate-400">Privacy Policy</div>
        <svg class="h-4 w-4 text-sky-400" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 3h7v7M10 14L21 3M21 14v7h-7"/></svg>
      </a>
    </div>
  </div>

  {% from 'components/overlays/modal.html' import modal %}
  {% call modal('drive-disconnect', title='Disconnect Google Drive', confirm_text='Disconnect', cancel_text='Cancel') %}
    <p class="text-slate-300 text-sm">Are you sure you want to disconnect Google Drive? Jobs requiring Drive access will no longer work until you reconnect.</p>
  {% endcall %}
</div>
{% endblock %}
