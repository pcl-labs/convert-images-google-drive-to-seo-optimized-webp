<aside x-data="{ open: false }" class="">
  {% macro nav_links(path) %}
    <a href="/" class="flex items-center gap-2 px-3 py-2 rounded-md {{ 'bg-slate-900 text-white' if path == '/' else 'text-slate-200 hover:bg-slate-900' }}">Dashboard</a>
    <a href="/jobs" class="flex items-center gap-2 px-3 py-2 rounded-md {{ 'bg-slate-900 text-white' if path.startswith('/jobs') else 'text-slate-200 hover:bg-slate-900' }}">Jobs</a>
    <a href="/activity" class="flex items-center gap-2 px-3 py-2 rounded-md {{ 'bg-slate-900 text-white' if path.startswith('/activity') else 'text-slate-200 hover:bg-slate-900' }}">Activity</a>
    <a href="/integrations" class="flex items-center gap-2 px-3 py-2 rounded-md {{ 'bg-slate-900 text-white' if path.startswith('/integrations') else 'text-slate-200 hover:bg-slate-900' }}">Integrations</a>
    <a href="/account" class="flex items-center gap-2 px-3 py-2 rounded-md {{ 'bg-slate-900 text-white' if path.startswith('/account') else 'text-slate-200 hover:bg-slate-900' }}">Account</a>
    <a href="/settings" class="flex items-center gap-2 px-3 py-2 rounded-md {{ 'bg-slate-900 text-white' if path.startswith('/settings') else 'text-slate-200 hover:bg-slate-900' }}">Settings</a>
  {% endmacro %}
  <div class="lg:hidden">
    <!-- Mobile header bar with menu button only -->
    <div class="sticky top-0 z-30 h-14 flex items-center justify-start px-3 bg-slate-950/80 border-b border-slate-900 backdrop-blur">
      <button @click="open = true" aria-label="Open menu" class="inline-flex items-center rounded-md bg-slate-800/80 border border-slate-700 px-3 py-2 text-slate-200 hover:bg-slate-700">
        <svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg>
        <span class="ml-2 text-sm">Menu</span>
      </button>
    </div>
    <div x-show="open" x-transition.opacity class="fixed inset-0 z-40 bg-black/50" @click="open=false"></div>
    <div x-show="open" x-transition class="fixed inset-y-0 left-0 z-50 w-64 bg-slate-900 border-r border-slate-800 p-4">
      <div class="flex items-center justify-between mb-4">
        <div class="text-white font-semibold">App</div>
        <button @click="open=false" aria-label="Close menu" class="text-slate-400 hover:text-slate-200">
          <svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
        </button>
      </div>
      <nav class="space-y-1">
        {% set path = request.url.path %}
        {{ nav_links(path) }}
      </nav>
    </div>
  </div>

  <div class="hidden lg:flex lg:flex-col lg:w-64 lg:fixed lg:inset-y-0 bg-slate-950 border-r border-slate-900">
    <div class="h-14 flex items-center px-4 border-b border-slate-900">
      <div class="flex items-center gap-2">
        <div class="h-6 w-6 rounded-md bg-sky-600"></div>
        <span class="text-white font-semibold">App</span>
      </div>
    </div>
    <nav class="flex-1 p-3 space-y-1">
      {% set path = request.url.path %}
      {{ nav_links(path) }}
    </nav>
    <!-- Desktop footer with email link (no dropdown) -->
    <div class="p-3 border-t border-slate-900">
      <a href="/account" class="block w-full">
        <div class="h-12 px-3 rounded-md flex items-center gap-3 text-slate-300 hover:bg-slate-900/60">
          <svg class="h-5 w-5 text-slate-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M4 4h16v16H4z"/><path stroke-linecap="round" stroke-linejoin="round" d="M22 6l-10 7L2 6"/></svg>
          <span class="text-sm truncate">{{ user.email if user and user.email else 'Account' }}</span>
        </div>
      </a>
    </div>
  </div>
</aside>
